.. _umlauts:

Буква Ё
=======

Если не ударяться в крайности, то можно считать, что в русском языке
употребление буквы Ё допустимо, но не обязательно. Это означает, что как
в исходном тексте, так и в словарях она иногда может быть, а иногда ее
может не быть.

В pymorphy2 считается, что:

* в словарях употребление буквы Ё обязательно; Е вместо Ё (как и Ё
  вместо Е) - это ошибка в словаре. Иными словами, Е и Ё в
  словарях - 2 совсем разные буквы.

* В текстах/словах, которые подаются на вход морфологического анализатора,
  употребление буквы Ё необязательно. Например, слово "ОЗЕРА" должно быть
  разобрано и как "(нет) ОЗЕРА", и как "(глубокие) ОЗЁРА".

  .. note::

    При этом входное слово "ОЗЁРА" будет однозначно разобрано как
    "(глубокие) ОЗЁРА".

Детали реализации
-----------------

"Наивный" подход - это генерация все вариантов возможных замен "Е" на "Ё"
во входном слове и проверка всех вариантов по словарю. В русском языке
"Е" - очень распространенная буква, и много слов, где Е встречается
несколько раз. Например, для слова с 3 буквами Е нужно сгенерировать
еще 7 вариантов слова - вместо 1 проверки по словарю нужно было
бы выполнить 8 (+ время на генерацию вариантов слов).

При разборе pymorphy2 использует другой подход - все слова хранятся в графе,
и при обходе графа кроме направлений "Е" каждый раз еще пробуется
направление "Ё". При этом в исходном коде pymorphy2 этого обхода графа
в явном виде нет, т.к. библиотеки DAWG_ и DAWG-Python_ сами умеет производить
"поиск с возможными заменами".

.. _DAWG: https://github.com/kmike/DAWG
.. _DAWG-Python: https://github.com/kmike/DAWG-Python

"Наивный" подход в pymorphy2 используется только в скрипте генерации
данных для автоматических тестов (чтобы обеспечить перекрестную проверку).

Поддержка буквы "Ё" в pymorphy2 в итоге замедляет разбор на 10-40%
(в зависимости от интерпретатора).

.. note::

    Возможно, в будующих версиях имеет смысл реализовать кроме описанного
    выше способа еще и другой, более быстрый, но примитивный (Ё==Е с упрощенным
    словарем без букв Ё совсем, как в pymorphy1).
